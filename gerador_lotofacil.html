<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gerador de Combinações - Lotofácil</title>
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--accent:#10b981;--muted:#94a3b8;--glass:rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071020 0%, #07172a 100%);color:#e6eef8;padding:28px;box-sizing:border-box}
    .container{max-width:980px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    .card{background:var(--card);border-radius:14px;padding:14px;box-shadow:0 6px 18px rgba(2,6,23,0.6);margin-bottom:12px}
    .grid{display:grid;grid-template-columns:1fr 300px;gap:12px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type="text"],select,input[type="number"]{width:100%;padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);color:inherit}
    .row{display:flex;gap:8px}
    button{background:var(--accent);border:none;color:#04201a;padding:10px 12px;border-radius:10px;font-weight:600;cursor:pointer}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .controls{display:flex;flex-direction:column;gap:10px}
    .modes{display:flex;gap:6px;flex-wrap:wrap}
    .mode{padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.02);cursor:pointer;border:1px solid transparent}
    .mode.active{border-color:rgba(16,185,129,0.12);box-shadow:inset 0 0 0 1px rgba(16,185,129,0.06)}
    .results{margin-top:12px}
    .game{background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:8px;border-radius:8px;margin-bottom:8px;display:flex;justify-content:space-between;align-items:center}
    .nums{display:flex;gap:6px}
    .num{width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.03);font-weight:700}
    .actions{display:flex;gap:8px}
    .small{font-size:12px;color:var(--muted)}
    footer{color:var(--muted);font-size:12px;margin-top:12px}
    @media(max-width:880px){.grid{grid-template-columns:1fr}} 
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Gerador de Combinações — Lotofácil</h1>
        <p class="lead">Gera jogos de 15 dezenas (1–25). Escolha o modo, quantidade de jogos e regras de equilíbrio.</p>
      </div>
    </header>

    <div class="grid">
      <div class="card">
        <div class="controls">
          <div>
            <label>Quantidade de jogos</label>
            <input id="numGames" type="number" min="1" max="200" value="5" />
          </div>

          <div>
            <label>Modo de geração</label>
            <select id="mode">
              <option value="random">Aleatório puro</option>
              <option value="balanced">Equilibrado (pares/ímpares & faixas)</option>
              <option value="hotcold">Quentes & Frias</option>
              <option value="369">Método 3-6-9 (adaptado)</option>
            </select>
          </div>

          <div>
            <label>Dezenas quentes (opcional — separadas por vírgula, ex: 1,3,7)</label>
            <input id="hotInput" type="text" placeholder="Ex.: 3,7,11" />
            <p class="small">Se vazio, o gerador usará distribuição uniforme entre números.</p>
          </div>

          <div>
            <label>Equilíbrio par/ímpar (apenas modo Equilibrado)</label>
            <div class="row">
              <input id="minEven" type="number" min="0" max="15" value="6" />
              <input id="maxEven" type="number" min="0" max="15" value="9" />
            </div>
            <p class="small">Número mínimo e máximo de pares por jogo.</p>
          </div>

          <div style="display:flex;gap:8px;align-items:center">
            <button id="generate">Gerar</button>
            <button id="clear" class="secondary">Limpar</button>
            <button id="download" class="secondary">Download CSV</button>
          </div>
        </div>
      </div>

      <div class="card" id="infoCard">
        <strong>Como funciona</strong>
        <p class="small">Modos: <br>
        <em>Aleatório:</em> sorteia 15 números sem regra;<br>
        <em>Equilibrado:</em> força a quantidade de pares/ímpares e distribui por faixas (1–9 / 10–17 / 18–25);<br>
        <em>Quentes & Frias:</em> prioriza números informados em "Dezenas quentes";<br>
        <em>3-6-9:</em> escolhe números seguindo saltos e múltiplos, adaptado para 1–25.</p>
        <hr />
        <div class="small"><strong>Dicas:</strong> Use o campo de dezenas quentes se quiser que certas dezenas apareçam com maior peso. O gerador evita repetições internas (cada jogo tem números únicos).</div>
      </div>
    </div>

    <div class="card results" id="resultsCard">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>Resultados</strong>
        <div class="actions">
          <button id="copy" class="secondary">Copiar</button>
          <button id="shuffle" class="secondary">Embaralhar visual</button>
        </div>
      </div>
      <div id="results" style="margin-top:10px"></div>
    </div>

    <footer>Arquivo gerado localmente no seu navegador — nenhum dado é enviado a servidores.</footer>
  </div>

<script>
  // Utilitários
  const rng = (min, max) => Math.floor(Math.random()*(max-min+1))+min;
  const uniqueRandomSample = (pool, k)=>{
    const arr = [...pool];
    for(let i=arr.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]
    }
    return arr.slice(0,k);
  }

  // Geração de um jogo aleatório (15/25)
  function generateRandomGame(){
    const pool = Array.from({length:25},(_,i)=>i+1);
    return uniqueRandomSample(pool,15).sort((a,b)=>a-b);
  }

  function countEven(nums){return nums.filter(n=>n%2===0).length}

  // Modo Equilibrado: respeita minEven/maxEven e distribui por 3 faixas
  function generateBalancedGame(minEven, maxEven){
    const pool = Array.from({length:25},(_,i)=>i+1);
    let attempts=0;
    while(attempts<2000){
      let candidate = uniqueRandomSample(pool,15).sort((a,b)=>a-b);
      const ev = countEven(candidate);
      // faixa check: garantir pelo menos 4 números em cada faixa aproximada
      const f1 = candidate.filter(n=>n<=9).length; // 1-9
      const f2 = candidate.filter(n=>n>=10 && n<=17).length; //10-17
      const f3 = candidate.filter(n=>n>=18).length; //18-25
      if(ev>=minEven && ev<=maxEven && f1>=3 && f2>=4 && f3>=3) return candidate;
      attempts++;
    }
    // fallback
    return generateRandomGame();
  }

  // Modo Quentes/Frias: usa lista de quentes preferenciais
  function generateHotColdGame(hotList){
    const pool = Array.from({length:25},(_,i)=>i+1);
    const hot = hotList.filter(n=>n>=1 && n<=25);
    const uniqueHot = [...new Set(hot)];
    const takeHot = Math.min(8, Math.max(2, Math.floor(Math.random()*5)+2)); // entre 2 e 6 (ou até 8)
    const selectedHot = uniqueRandomSample(uniqueHot.length?uniqueHot:pool, Math.min(takeHot, uniqueHot.length||0));
    // fill rest from cold pool
    const coldPool = pool.filter(n=>!selectedHot.includes(n));
    const rest = uniqueRandomSample(coldPool, 15 - selectedHot.length);
    return [...selectedHot, ...rest].sort((a,b)=>a-b);
  }

  // Modo 3-6-9 adaptado: escolhe múltiplos e saltos, mas garante 15
  function generate369Game(){
    const pool = Array.from({length:25},(_,i)=>i+1);
    // pick at least one multiple of 3, one multiple of 6, one multiple of 9 (if exist)
    const mult3 = pool.filter(n=>n%3===0);
    const mult6 = pool.filter(n=>n%6===0);
    const mult9 = pool.filter(n=>n%9===0);
    const chosen = [];
    if(mult9.length) chosen.push(mult9[Math.floor(Math.random()*mult9.length)]);
    if(mult6.length) chosen.push(mult6[Math.floor(Math.random()*mult6.length)]);
    if(mult3.length) chosen.push(mult3[Math.floor(Math.random()*mult3.length)]);
    // add some numbers using increments +3,+6,+9 around random bases
    const base = rng(1,25);
    const seq = [base, base+3, base+6, base+9].filter(n=>n>=1 && n<=25);
    seq.forEach(n=>{ if(!chosen.includes(n)) chosen.push(n) });
    // fill rest randomly
    const remaining = pool.filter(n=>!chosen.includes(n));
    const rest = uniqueRandomSample(remaining, 15 - chosen.length);
    return [...chosen, ...rest].sort((a,b)=>a-b);
  }

  // UI handlers
  const resultsEl = document.getElementById('results');
  const generateBtn = document.getElementById('generate');
  const clearBtn = document.getElementById('clear');
  const downloadBtn = document.getElementById('download');
  const copyBtn = document.getElementById('copy');
  const shuffleBtn = document.getElementById('shuffle');

  function parseHotInput(){
    const raw = document.getElementById('hotInput').value.trim();
    if(!raw) return [];
    return raw.split(',').map(s=>parseInt(s.trim(),10)).filter(n=>!isNaN(n) && n>=1 && n<=25);
  }

  function renderGames(games){
    resultsEl.innerHTML='';
    games.forEach((g,i)=>{
      const div = document.createElement('div'); div.className='game';
      const left = document.createElement('div'); left.className='nums';
      g.forEach(n=>{
        const span = document.createElement('div'); span.className='num'; span.textContent = String(n).padStart(2,'0');
        left.appendChild(span);
      });
      const right = document.createElement('div'); right.className='small';
      right.innerHTML = `Jogo ${i+1} &nbsp; | &nbsp; Soma: ${g.reduce((a,b)=>a+b,0)} &nbsp; | &nbsp; Pares:${countEven(g)}`;
      div.appendChild(left); div.appendChild(right);
      resultsEl.appendChild(div);
    });
  }

  function generateGames(){
    const q = parseInt(document.getElementById('numGames').value,10) || 1;
    const mode = document.getElementById('mode').value;
    const hotList = parseHotInput();
    const minEven = parseInt(document.getElementById('minEven').value,10) || 0;
    const maxEven = parseInt(document.getElementById('maxEven').value,10) || 15;
    const games = [];
    for(let i=0;i<q;i++){
      let game;
      if(mode==='random') game = generateRandomGame();
      else if(mode==='balanced') game = generateBalancedGame(minEven, maxEven);
      else if(mode==='hotcold') game = generateHotColdGame(hotList);
      else if(mode==='369') game = generate369Game();
      else game = generateRandomGame();
      games.push(game);
    }
    renderGames(games);
    // store last for download/copy
    window._lastGames = games;
  }

  generateBtn.addEventListener('click',generateGames);
  clearBtn.addEventListener('click',()=>{resultsEl.innerHTML=''; window._lastGames=[]});

  copyBtn.addEventListener('click',()=>{
    const games = window._lastGames||[];
    if(!games.length) return alert('Nenhum jogo para copiar. Gere primeiro.');
    const text = games.map(g=>g.map(n=>String(n).padStart(2,'0')).join(' ')).join('\n');
    navigator.clipboard.writeText(text).then(()=>alert('Jogos copiados para a área de transferência.'))
  });

  shuffleBtn.addEventListener('click',()=>{
    // simples efeito visual: reordena a exibição sem alterar conteúdo
    const nodes = Array.from(resultsEl.children);
    for(let i=nodes.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [nodes[i],nodes[j]]=[nodes[j],nodes[i]]}
    resultsEl.innerHTML=''; nodes.forEach(n=>resultsEl.appendChild(n));
  });

  downloadBtn.addEventListener('click',()=>{
    const games = window._lastGames||[];
    if(!games.length) return alert('Nenhum jogo para baixar. Gere primeiro.');
    const csv = games.map((g,i)=>`Jogo ${i+1},"${g.map(n=>String(n).padStart(2,'0')).join(' ')}",${g.reduce((a,b)=>a+b,0)},${countEven(g)}`).join('\n');
    const blob = new Blob([csv],{type:'text/csv;charset=utf-8;'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href=url; a.download='lotofacil-jogos.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });

  // gerar inicialmente
  window._lastGames = [];
  generateGames();
</script>
</body>
</html>
